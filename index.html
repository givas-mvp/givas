<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta content="initial-scale=1, minimum-scale=1, width=device-width" name="viewport">

  <title>Find a Supplier - Givas</title>

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400|Material+Icons">
  <link rel="stylesheet" href="https://arbynacosta.github.io/css/fonts.css">

  <script>function u() { return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) { var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8); return v.toString(16); }); } let currentUser = u();</script>

  <style>
    *,
    *:after,
    *:before {
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      box-sizing: border-box;
    }

    body {
      color: #202124;
      font-family: "Google Sans", sans-serif;
      font-size: 14px;
      font-weight: 400;
      letter-spacing: .2px;
      line-height: 18px;
      position: relative;
      margin: 0;
    }

    .app-title,
    .app-input__label {
      -webkit-font-smoothing: antialiased;
      display: block;
      font-family: Google Sans,Roboto,Arial,Helvetica,sans-serif;
      font-size: 32px;
      letter-spacing: -.17px;
      line-height: 41px;
      margin: 0;
      text-rendering: optimizeLegibility;
    }

    .app-title {
      font-weight: 400;
      display: block;
    }

    .app-input__label,
    #app-results__supplier-count,
    #app-results__static-text {
      font-weight: 500;
      font-size: 14px;
      margin-top: 16px;
    }

    .app-input {
      position: relative;
    }

    .app-input > input {
      -webkit-appearance: none;
      -webkit-box-shadow: 0 2px 4px rgba(0,0,0,.11);
      -webkit-font-smoothing: antialiased;
      -webkit-transition: border-color .15s;
      background-color: #fff;
      border-bottom: 1px solid #9aa0a6;
      border-radius: 4px;
      border: 1px solid #dadce0;
      box-shadow: 0 2px 4px rgba(0,0,0,.11);
      color: #3c4043;
      font-family: "Google Sans",Roboto,Arial,Helvetica,sans-serif;
      font-size: 16px;
      font-weight: 400;
      line-height: 20px;
      padding: 14px 15px;
      transition: border-color .15s;
      width: 100%;
    }

    .app-input > input:active,
    .app-input > input:focus {
      outline: none;
    }

    .app-input--has-icon input {
      padding-left: 43px;
    }

    .app-input--has-icon > svg {
      position: absolute;
      left: 11px;
      top: 54px;
      fill: #b9b9b9;
    }

    #app-results {
      font-family: Roboto, sans-serif;
      margin-top: 24px;
    }

    #app-results__info-icon {
      fill: #6b6b6b;
      display: inline-block;
      vertical-align: middle;
    }

    #app-results__supplier-count,
    #app-results__static-text {
      font-size: 14px;
      margin: 0;
      margin-left: 6px;
      display: inline-block;
      vertical-align: -1px;
      color: #6b6b6b;
    }

    #app-results__supplier-count {
      transition: color .25s ease-in-out;
    }

    #app-results__supplier-count.changed {
      color: #40a744;
    }

    #contact-supplier {
      -webkit-appearance: none;
      background: transparent;
      border: 0;
      cursor: pointer;
      display: inline-block;
      font-family: Google Sans,Roboto,Arial,Helvetica,sans-serif;
      font-size: 14px;
      font-weight: 500;
      line-height: 1.15;
      -webkit-tap-highlight-color: transparent;
      text-align: center;
      text-decoration: none;
      -webkit-transition: background .15s,color .15s;
      transition: background .15s,color .15s;
      border-radius: 4px;
      font-size: 14px;
      letter-spacing: -0.2px;
      padding: 10px 36px;
      background: #1967d2;
      outline: 0;
      color: #fff;
      -webkit-font-smoothing: antialiased;
      min-width: 126px;
      margin-top: 12px;
    }

    #contact-supplier:hover {
      background: #185abc;
      color: #fff;
    }

    #contact-supplier[disabled] {
      background-color: #a0a7b0;
    }

    .dots {
      display: block;
      position: relative;
      margin-bottom: 16px;
    }

    .dots .dot {
      background-color: #6b6b6b;
      display: inline-block;
      height: 12px;
      width: 12px;
      border-radius: 6px;
      margin-right: 30px;
    }

    .dot.on {
      background-color: #4285f4;
    }

    .dot.on:nth-child(2) {
      background-color: #ea4335;
    }

    .dot.on:nth-child(3) {
      background-color: #fbbc04;
    }

    main {
      padding: 24px;
      position: relative;
    }

    body > footer {
      color: #cacaca;
      display: block;
      width: auto;
      margin: 0 24px;
      padding: 0 0 24px;
    }

    footer > span {
      font-family: Roboto, sans-serif;
    }

    @media screen and (min-width: 310px) {

      .app-input__label,
      #app-results__supplier-count,
      #app-results__static-text {
        font-size: 16px;
      }

    }

    @media screen and (min-width: 359px) {

      main {
        padding: 36px;
      }

      .dots {
        margin-bottom: 24px;
      }

      .app-input__label {
        margin-top: 24px;
      }

      #app-results {
        margin-top: 36px;
      }

      body > footer {
        margin: 0 36px;
        padding: 0 0 36px;
      }

    }

    @media screen and (min-width: 399px) {

      .app-input__label {
        font-size: 18px;
      }

      #app-results__supplier-count,
      #app-results__static-text,
      #contact-supplier {
        font-size: 16px;
      }

      #app-results__supplier-count,
      #app-results__static-text {
        vertical-align: -2px;
      }

      body > footer {
        padding-top: 24px;
      }
    }

    @media screen and (min-width: 767px) {

      main {
        padding: 60px;
      }

      .dots {
        margin-bottom: 60px;
        margin-top: 12px;
      }

      .app-input__label {
        font-size: 30px;
        margin-top: 0;
      }

      .app-input {
        margin-top: 32px;
      }

      .app-input:first-of-type {
        margin-top: 0;
      }

      .app-input input {
        margin-top: 32px;
      }

      .app-input--has-icon > svg {
        top: 85px;
      }

      body > footer {
        color: #aaa;
        border-top: 1px solid #ddd;
        margin-left: 60px;
        margin-right: 60px;
        margin-top: 16px;
        padding-top: 16px;
      }

    }

    @media screen and (min-width: 1151px) {

      html,
      body {
        height: 100%;
        min-height: 920px;
      }

      body > footer {
        height: 83px;
        margin: 0;
        position: absolute;
        bottom: 0;
        width: 100%;
        padding-left: 135px;
        padding-top: 35px;
        line-height: 15px;
        border: 0;
        background-color: #eef1f1;
        color: #80868b;
      }

      body > footer strong {
        position: absolute;
        left: 60px;
        font-size: 1.5rem;
        font-weight: 500;
        letter-spacing: -0.3px;
        line-height: 10px;
        color: #5f6368;
      }

      body > footer .hideable {
        display: none;
        visibility: hidden;
      }

      .row {
        overflow: auto;
        position: relative;
        width: 100%;
      }

      .row:after {
        content: "";
        clear: both;
        display: table;
      }

      .column-6,
      .column-12 {
        float: left;
        padding: 5px;
      }

      .column-6 {
        width: 50%;
      }

      .column-12 {
        width: 100%;
      }

      #app-results__info-icon {
        display: none;
        visibility: hidden;
      }

      #contact-supplier {
        margin-top: 60px;
      }

      #app-results {
        transition: opacity 0.1s ease-in-out;
        margin-top: 0;
        opacity: 0;
        text-align: center;
      }

      #app-results__supplier-count,
      #app-results__static-text {
        font-size: 21px;
        line-height: 24px;
        margin: 0;
        display: block;
      }

      #app-results__supplier-count {
        font-family: "Google Sans", sans-serif;
        font-size: 200px;
        font-weight: 400;
        line-height: 204px;
      }

    }

    @media screen and (min-width: 1365px) {

      .app-input__label {
        font-size: 32px;
      }

    }

    @media screen and (min-width: 1400px) {

      .main {
        margin: 0 auto;
        max-width: 1280px;
        min-height: calc(100% - 83px);
        display: block;
      }

      #app-results {
        right: calc(30% + 30px);
        top: 300px;
      }

    }

    #diagonal-bg {
      position: fixed;
      z-index: -9999;
      width: 100vw;
      height: 100vh;
      border-width: 50vh 50vw;
      border-color: #fcfcfd #fcfcfd transparent transparent;
      border-style: solid;
      top: 0;
      left: 0;
    }
  </style>
</head>

<body>
  <div id="diagonal-bg"></div>
  <main class="main" id="page-1">
    <div class="row">
      <div class="column-6" id="app-inputs">
        <div class="dots">
          <span class="dot on"></span>
          <span class="dot"></span>
          <span class="dot"></span>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="column-6" id="app-inputs">
        <h1 class="app-title">Find your next supplier at Givas.</h1>

        <div class="app-input" id="supply-input">
          <span class="app-input__label">What supplies are you looking for?</span>
          <input type="text" placeholder="Construction materials, whole foods, office supplies, etc.">
        </div>

        <div class="app-input app-input--has-icon" id="location-input">
          <span class="app-input__label">Where do you need your supplies?</span>
          <svg width="26" height="26" viewBox="0 0 26 26" role="presentation" xmlns="http://www.w3.org/2000/svg" class="gc-location-field__icon gc-icon"><g data-v-f428d9e4=""><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path> <path d="M0 0h24v24H0z" fill="none"></path></g></svg>
          <input type="text" placeholder="Caloocan City, Philippines">
        </div>

        <div class="app-input" id="date-input">
          <span class="app-input__label">When do you need your supplies?</span>
          <input type="date" placeholder="MM/DD/YYYY">
        </div>
      </div>

      <div class="column-6" id="app-results">
        <div id="app-results__info-icon">
          <svg width="20" height="20" viewBox="0 0 20 20" role="presentation" xmlns="http://www.w3.org/2000/svg" class="gc-icon"><path d="M9 15h2V9H9v6zm1-15C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM9 7h2V5H9v2z" fill-rule="nonzero"></path></svg>
        </div>

        <div id="app-results__supplier-count">0</div>

        <div id="app-results__static-text">Suppliers matched</div>
      </div>
    </div>

    <div class="row">
      <div class="column-12">
        <button role="button" id="contact-supplier" disabled>Contact Suppliers</button>
      </div>
    </div>
  </main>

  <footer>
    <span class="copyright">&copy;</span> 2020<span class="hideable"> </span><strong>Givas</strong>. All rights reserved.
  </footer>

  <script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

  <script>
    !function(a,b,c,d,e,f,g,h,i){function j(a){var b,c=a.length,e=this,f=0,g=e.i=e.j=0,h=e.S=[];for(c||(a=[c++]);d>f;)h[f]=f++;for(f=0;d>f;f++)h[f]=h[g=s&g+a[f%c]+(b=h[f])],h[g]=b;(e.g=function(a){for(var b,c=0,f=e.i,g=e.j,h=e.S;a--;)b=h[f=s&f+1],c=c*d+h[s&(h[f]=h[g=s&g+b])+(h[g]=b)];return e.i=f,e.j=g,c})(d)}function k(a,b){var c,d=[],e=typeof a;if(b&&"object"==e)for(c in a)try{d.push(k(a[c],b-1))}catch(f){}return d.length?d:"string"==e?a:a+"\0"}function l(a,b){for(var c,d=a+"",e=0;e<d.length;)b[s&e]=s&(c^=19*b[s&e])+d.charCodeAt(e++);return n(b)}function m(c){try{return o?n(o.randomBytes(d)):(a.crypto.getRandomValues(c=new Uint8Array(d)),n(c))}catch(e){return[+new Date,a,(c=a.navigator)&&c.plugins,a.screen,n(b)]}}function n(a){return String.fromCharCode.apply(0,a)}var o,p=c.pow(d,e),q=c.pow(2,f),r=2*q,s=d-1,t=c["seed"+i]=function(a,f,g){var h=[];f=1==f?{entropy:!0}:f||{};var o=l(k(f.entropy?[a,n(b)]:null==a?m():a,3),h),s=new j(h);return l(n(s.S),b),(f.pass||g||function(a,b,d){return d?(c[i]=a,b):a})(function(){for(var a=s.g(e),b=p,c=0;q>a;)a=(a+c)*d,b*=d,c=s.g(1);for(;a>=r;)a/=2,b/=2,c>>>=1;return(a+c)/b},o,"global"in f?f.global:this==c)};if(l(c[i](),b),g&&g.exports){g.exports=t;try{o=require("crypto")}catch(u){}}else h&&h.amd&&h(function(){return t})}(this,[],Math,256,6,52,"object"==typeof module&&module,"function"==typeof define&&define,"random");

    // Setup before functions
    var typingTimer;                // Timer identifier
    var doneTypingInterval = 1000;  // Time in ms, 5 second for example
    var $_input = $('input');
    var $_supply = $('#supply-input input');
    var $_location = $('#location-input input');
    var $_date = $('#date-input input');
    var $_count = $('#app-results__supplier-count');

    var $_contactButton = $('#contact-supplier');

    // On keyup, start the countdown
    $_input.on('keyup change', function () {
      clearTimeout(typingTimer);
      typingTimer = setTimeout(doneTyping, doneTypingInterval);

      if ($_location.val() == '') {
        $($('.dot').get(1)).removeClass('on');
      } else {
        $($('.dot').get(1)).addClass('on');
      }
      if ($_date.val() == '') {
        $($('.dot').get(2)).removeClass('on');
      } else {
        $($('.dot').get(2)).addClass('on');
      }
    });

    // On keydown, clear the countdown
    $_input.on('keydown', function () {
      clearTimeout(typingTimer);
    });

    // User is "finished typing," do something
    function doneTyping() {
      let supply = $_supply.val().replace(/\s/g,'');
      let commaCount = supply.split(",").length - 1;

      if (supply == '' && parseInt($_count.text()) == 0) {
        return;
      }

      $_contactButton.removeAttr('disabled');
      $('#app-results').css('opacity', '1');

      // Create a focuser factor based on number of commas
      let locationFactor = ($_location.val().trim() == '' ? 1 : (1.0 / 2.0));
      let dateFactor = ($_date.val().trim() == '' ? 1 : (2.0 / 3.0));
      let focusFactor = (commaCount < 1) ? 1 : commaCount + 1;

      // better date factor
      let date1 = new Date();
      let date2 = new Date($_date.val().trim());

      // To calculate the time difference of two dates
      let differenceInTime = date2.getTime() - date1.getTime();

      // To calculate the no. of days between two dates
      let differenceInDays = differenceInTime / (1000 * 3600 * 24);
      differenceInDays = isNaN(differenceInDays) ? 8 : differenceInDays;
      let diffFactor = isNaN(differenceInDays) ? 1 : (differenceInDays < 7) ? 8 - differenceInDays : 1;

      focusFactor = focusFactor / locationFactor / dateFactor;

      // Generate semi-random value based on input
      Math.seedrandom(supply.split(',')[0].toLowerCase());

      if (differenceInDays <= 0 || supply == '') {
        $_count.removeClass('changed');
      } else {
        $_count.addClass('changed');
      }

      $({ Counter: parseInt($_count.text()) }).animate({
        Counter: (differenceInDays <= 0 || supply == '') ? 0 : parseInt(((50 + Math.random() * 160) / focusFactor) / diffFactor)
      }, {
        duration: 1000,
        easing: 'swing',
        step: function() {
          $_count.text(Math.ceil(this.Counter));
        },
        complete: function() {
          if ((differenceInDays <= 0 && parseInt($_count.text()) == 1) || supply == '') {
            $_count.text(0);
          }
        }
      });
    }

    $_contactButton.on('click', function() {
      $_this = $(this);
      if ($_this.attr('disabled') == 'disabled') {
        return;
      }

      fetch("https://rapidprod-sendgrid-v1.p.rapidapi.com/mail/send", {
        "method": "POST",
        "headers": {
          "x-rapidapi-host": "rapidprod-sendgrid-v1.p.rapidapi.com",
          "x-rapidapi-key": "f3241b21c5mshe69a6a0dab5aab5p13df9cjsnd698c218133d",
          "content-type": "application/json",
          "accept": "application/json"
        },
        "body": {
          "personalizations": [
            {
              "to": [
                {
                  "email": "arbyn.acosta@gmail.com"
                }
              ],
              "subject": `[Givas] ${currentUser} - Initial Page`
            }
          ],
          "from": {
            "email": "bot@givas.com"
          },
          "content": [
            {
              "type": "text/plain",
              "value": `${$_supply.val()}\n${$_location.val()}\n${$_date.val()}`
            }
          ]
        }
      })
      .then(response => {
        console.debug(response);
      })
      .catch(err => {
        console.debug(err);
      });
    });
  </script>
</body>

</html>
